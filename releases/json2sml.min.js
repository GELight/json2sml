!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JSON2SML=t():e.JSON2SML=t()}(self,(function(){return e={590:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Converter=void 0;const s=i(n(480));t.Converter=s.default;const r=s.default.convert({firstName:"John",lastName:"Smith",isAlive:!0,age:27,address:{streetAddress:"21 2nd Street",city:"New York",state:"NY",postalCode:"10021-3100"},aNullValue:null,phoneNumbers:[{type:"home",number:"212 555-1234"},{type:"office",number:"646 555-4567"}],children:["Aaron"],spouse:!0});console.log(r.getRoot().getElement("address").getAttributes())},480:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(43),r=i(n(284));class o{static convert(e){const t=new s.SmlElement("SML"),n=new s.SmlDocument(t),i=new r.default;return 1===i.case?(n.setEndKeyword("end"),t.name="sml"):2===i.case&&n.setEndKeyword("END"),1===n.getRoot().nodes.length&&n.getRoot().nodes[0]instanceof s.SmlElement&&n.setRoot(n.getRoot().nodes[0]),o.convertObj(e,t,i),n}static convertObj(e,t,n){if(o.isValue(e))t.add(new s.SmlAttribute("Value",[String(e)]));else if(o.isSimpleArray(e))t.addAttribute("Value",o.getSimpleArrayValues(e));else if(o.isSimpleMatrix(e))t.addAttribute("Value",o.getSimpleMatrixValues(e));else if(o.isComplexArray(e)){const i=o.getItemName(null);o.convertComplexArray(e,t,i,n)}else o.isObject(e)?o.convertObjProperties(e,t,n):t.addString("...","...")}static convertObjProperties(e,t,n){const i=Object.keys(e);for(const r of i){n.scan(r);const i=e[r];if(o.isValue(i))t.add(new s.SmlAttribute(r,[i]));else if(o.isSimpleArray(i))t.addAttribute(r,o.getSimpleArrayValues(i));else if(o.isSimpleMatrix(i))t.addAttribute(r,o.getSimpleMatrixValues(i));else if(o.isComplexArray(i)){const e=t.addElement(r),s=o.getItemName(r);o.convertComplexArray(i,e,s,n)}else if(o.isObject(i)){const e=t.addElement(r);o.convertObjProperties(i,e,n)}else t.addString("...","...")}}static convertComplexArray(e,t,n,i){for(const s of e)if(o.isValue(s))t.addString(n,s);else if(o.isSimpleArray(s))t.addAttribute(n,o.getSimpleArrayValues(s));else if(o.isSimpleMatrix(s))t.addAttribute(n,o.getSimpleMatrixValues(s));else{const e=t.addElement(n);o.convertObj(s,e,i)}}static replaceLast(e,t,n){return e.substring(0,e.length-t)+n}static getItemName(e){if(null!=e&&e.length>0){if(e.endsWith("IES"))return o.replaceLast(e,3,"Y");if(e.endsWith("ies"))return o.replaceLast(e,3,"y");if(e.endsWith("S"))return o.replaceLast(e,1,"");if(e.endsWith("s"))return o.replaceLast(e,1,"")}return"item"}static getSimpleArrayValues(e){return 0===e.length?[null]:e.map((e=>o.valueToString(e)))}static getSimpleMatrixValues(e){const t=[];for(const n of e)if(o.isValue(n))t.push(o.valueToString(n));else{const e=o.getSimpleArrayValues(n);t.push(...e)}return t}static valueToString(e){return null===e?null:String(e)}static isValue(e){return null===e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e}static isSimpleArray(e){if(!Array.isArray(e))return!1;for(const t of e)if(!o.isValue(t))return!1;return!0}static isSimpleMatrix(e){if(!Array.isArray(e))return!1;for(const t of e)if(!o.isSimpleArray(t))return!1;const t=e[0].length;for(const n of e)if(n.length!==t)return!1;return!0}static isComplexArray(e){return Array.isArray(e)&&!o.isSimpleArray(e)}static isObject(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}}t.default=o},284:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.case=0,this.alreadySet=!1}scan(e){if(!this.alreadySet){try{if(e.startsWith("2"))return this.alreadySet=!0,void(this.case=0);e===e.toUpperCase()?this.case=2:e[0]===e[0].toLowerCase()&&(this.case=1)}catch(e){}this.alreadySet=!0}}}},894:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtil=t.ReliableTxtFile=t.ReliableTxtException=t.ReliableTxtEncoding=t.ReliableTxtDocumentServer=t.ReliableTxtDocument=void 0;const s=i(n(543));t.ReliableTxtDocument=s.default;const r=i(n(176));t.ReliableTxtDocumentServer=r.default;const o=i(n(938));t.ReliableTxtEncoding=o.default;const a=i(n(922));t.ReliableTxtException=a.default;const l=i(n(25));t.ReliableTxtFile=l.default;const u=i(n(966));t.StringUtil=u.default},543:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(966));class r{constructor(...e){return this.text="",this.text=e.join("\n"),this}static join(e){return new r(...e).toString()}setText(e){null!=e&&(this.text=e)}setTextByCodePoints(e){null!=e&&Array.isArray(e)&&(this.text=s.default.codePointsToString(e))}getText(){return this.text}getTextAsCodePoints(){return s.default.stringToCodePoints(this.text)}setLines(...e){this.text=e.join("\n")}getLines(){return this.text.split("\n")}toString(){return this.text}}t.default=r},176:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(543)),r=i(n(938)),o=i(n(25));class a extends s.default{constructor(...e){return super(...e),this.encoding=r.default.UTF8,this}static load(e){const t=(new o.default).load(e),n=new a(t.getContent());return n.setEncoding(t.getEncoding()),n}setEncoding(e){return this.encoding=e,this}getEncoding(){return this.encoding}save(e){return new o.default(this.encoding).save(e,this.text),this}}t.default=a},938:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.UTF8="utf8",e.UTF16_REVERSED="utf16le"}(n||(n={})),t.default=n},922:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,n)}}t.default=n},25:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(436),r=i(n(938)),o=i(n(922));class a{constructor(e){return this.fileContent="",this.encoding=r.default.UTF8,this.setEncoding(e),this}static getEncodingFromBuffer(e){if(e.length<2)return null;const t=e.readInt8(0),n=e.readInt8(1);return-1===t&&-2===n?r.default.UTF16_REVERSED:-17===t&&-69===n&&e.length>=3&&-65===e.readInt8(2)?r.default.UTF8:null}save(e,t,n){this.setEncoding(n);try{(0,s.writeFileSync)(e,"\ufeff"+t,this.encoding)}catch(e){console.error(e)}return this}load(e){try{const t=(0,s.readFileSync)(e,Object.assign({flag:"r"})),n=a.getEncodingFromBuffer(t);if(null===n)throw new o.default("Document does not have a ReliableTXT preamble");this.setEncoding(n);const i=(0,s.readFileSync)(e,Object.assign({encoding:this.encoding,flag:"r"})).toString();return this.fileContent=i.slice(1),this}catch(e){throw Error(e.message)}}getEncoding(){return this.encoding}getContent(){return this.fileContent}setEncoding(e){return e&&(this.encoding=e),this}}t.default=a},966:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{static getSubstr(e,t,n){return e.slice(t,t+n).map((e=>String.fromCodePoint(e))).join("")}static stringToCodePoints(e){const t=[];for(const n of e)t.push(n.codePointAt(0));return t}static codePointsToString(e){return e.map((e=>String.fromCodePoint(e))).join("")}static equalsIgnoreCase(e,t){return"string"==typeof e&&"string"==typeof t?0===e.localeCompare(t,void 0,{sensitivity:"accent"}):e===t}}t.default=n,n.doubleQuote='"'.codePointAt(0),n.lineBreak="\n".codePointAt(0),n.slash="/".codePointAt(0),n.hash="#".codePointAt(0),n.minus="-".codePointAt(0)},43:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtil=t.WsvParserException=t.WsvLine=t.WsvDocumentServer=t.WsvDocument=t.WsvChar=t.SmlRequest=t.SmlParserException=t.SmlNode=t.SmlNamedNode=t.SmlEmptyNode=t.SmlElement=t.SmlDocumentServer=t.SmlDocument=t.SmlAttribute=t.ReliableTxtFile=t.ReliableTxtException=t.ReliableTxtEncoding=t.ReliableTxtDocumentServer=t.ReliableTxtDocument=void 0;const s=n(945);Object.defineProperty(t,"ReliableTxtDocument",{enumerable:!0,get:function(){return s.ReliableTxtDocument}}),Object.defineProperty(t,"ReliableTxtDocumentServer",{enumerable:!0,get:function(){return s.ReliableTxtDocumentServer}}),Object.defineProperty(t,"ReliableTxtEncoding",{enumerable:!0,get:function(){return s.ReliableTxtEncoding}}),Object.defineProperty(t,"ReliableTxtException",{enumerable:!0,get:function(){return s.ReliableTxtException}}),Object.defineProperty(t,"ReliableTxtFile",{enumerable:!0,get:function(){return s.ReliableTxtFile}}),Object.defineProperty(t,"StringUtil",{enumerable:!0,get:function(){return s.StringUtil}}),Object.defineProperty(t,"WsvChar",{enumerable:!0,get:function(){return s.WsvChar}}),Object.defineProperty(t,"WsvDocument",{enumerable:!0,get:function(){return s.WsvDocument}}),Object.defineProperty(t,"WsvDocumentServer",{enumerable:!0,get:function(){return s.WsvDocumentServer}}),Object.defineProperty(t,"WsvLine",{enumerable:!0,get:function(){return s.WsvLine}}),Object.defineProperty(t,"WsvParserException",{enumerable:!0,get:function(){return s.WsvParserException}});const r=i(n(355));t.SmlAttribute=r.default;const o=i(n(771));t.SmlDocument=o.default;const a=i(n(588));t.SmlDocumentServer=a.default;const l=i(n(597));t.SmlElement=l.default;const u=i(n(41));t.SmlEmptyNode=u.default;const c=i(n(555));t.SmlNamedNode=c.default;const d=i(n(899));t.SmlNode=d.default;const h=i(n(264));t.SmlParserException=h.default;const f=i(n(794));t.SmlRequest=f.default},355:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(555)),r=i(n(650));class o extends s.default{constructor(e,t){super(e),this.values=[],this.setValues(...t.map(String))}setValues(...e){if(null===e||0===e.length)throw new Error("Values must contain at least one value");this.values=e.map(String)}getValues(e){return e?this.values.slice(e):this.values}getNumberValues(e){return e?this.values.slice(e).map(Number):this.values.map(Number)}getString(e){return e?this.values[e]:this.values[0]}setString(e){this.values=[e]}toString(){return r.default.serializeAttribute(this)}toWsvLines(e,t,n,i){r.default.serializeAttributeInternal(this,e,t,n)}}t.default=o},771:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(945),r=i(n(211)),o=i(n(650));class a{constructor(e){this.emptyNodesBefore=[],this.emptyNodesAfter=[],this.endKeyword="End",this.defaultIndentation=null,e&&(this.root=e)}static parse(e){const t=new a;return r.default.parseDocument(e,t)}setEndKeyword(e){this.endKeyword=e}getEndKeyword(){return this.endKeyword}setDefaultIndentation(e){if(!s.StringUtil.isWhitespaceOrEmpty(e))throw Error("Invalid indentation");this.defaultIndentation=e}getDefaultIndentation(){return this.defaultIndentation}getRoot(){return this.root}setRoot(e){this.root=e}toString(){return o.default.serializeDocument(this)}}t.default=a},588:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(945),r=i(n(771)),o=i(n(211));class a extends r.default{constructor(e){return super(e),this.encoding=s.ReliableTxtEncoding.UTF8,this}static parse(e){const t=new a;return o.default.parseDocument(e,t)}static load(e){const t=s.ReliableTxtDocumentServer.load(e),n=a.parse(t.getText());return n.setEncoding(t.getEncoding()),n}setEncoding(e){return this.encoding=e,this}getEncoding(){return this.encoding}save(e){return new s.ReliableTxtDocumentServer(this.toString()).setEncoding(this.getEncoding()).save(e),this}}t.default=a},597:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(945),r=i(n(355)),o=i(n(41)),a=i(n(555)),l=i(n(650));class u extends a.default{constructor(e){super(e),this.nodes=[]}setEndWhitespaces(...e){s.WsvLine.validateWhitespaces(e),this.endWhitespaces=e}getEndWhitespaces(){return[...this.endWhitespaces]}setEndComment(e){s.WsvLine.validateComment(e),this.endComment=e}getEndComment(){return this.endComment}setEndWhitespacesAndComment(e,t){this.endWhitespaces=e,this.endComment=t}add(e){return this.nodes.push(e),e}addAttribute(e,t){const n=t.map(String),i=new r.default(e,n);return this.add(i),i}addElement(e){const t=new u(e);return this.add(t),t}addEmptyNode(){const e=new o.default;return this.add(e),e}hasAttribute(e){return this.nodes.filter((e=>e instanceof r.default)).map((e=>e)).filter((t=>t.hasName(e))).length>0}getAttribute(e){const t=this.nodes.filter((e=>e instanceof r.default)).map((e=>e)).filter((t=>t.hasName(e))).shift();if(!t)throw Error(`No attribute with name '${e}'`);return t}getAttributes(e){let t=[];return t=e?this.nodes.filter((e=>e instanceof r.default)).map((e=>e)).filter((t=>t.hasName(e))):this.nodes.filter((e=>e instanceof r.default)).map((e=>e)),t}hasElement(e){return this.nodes.filter((e=>e instanceof u)).map((e=>e)).filter((t=>t.hasName(e))).length>0}getElement(e){const t=this.nodes.filter((e=>e instanceof u)).map((e=>e)).filter((t=>t.hasName(e))).shift();if(!t)throw Error(`No element with name '${e}'`);return t}getElements(e){let t=[];return t=e?this.nodes.filter((e=>e instanceof u)).map((e=>e)).filter((t=>t.hasName(e))):this.nodes.filter((e=>e instanceof u)).map((e=>e)),t}getBoolean(e){return Boolean(this.getAttribute(e).getString())}getNumber(e){return Number(this.getAttribute(e).getString())}getString(e){return this.getAttribute(e).getString()}getStringValues(e){return this.getAttribute(e).getValues()}getNumberValues(e){return this.getAttribute(e).getNumberValues()}toString(){return l.default.serializeElement(this)}toWsvLines(e,t,n,i){l.default.serializeElementInternal(this,e,t,n,i)}}t.default=u},41:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(899)),r=i(n(650));class o extends s.default{constructor(){super()}toString(){return r.default.serializeEmptyNode(this)}toWsvLines(e,t,n,i){r.default.serializeEmptyNodeInternal(this,e,t,n)}}t.default=o},555:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(945),r=i(n(899));class o extends r.default{constructor(e){super(),this.name=e}hasName(e){return s.StringUtil.equalsIgnoreCase(this.name,e)}}t.default=o},899:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(945);t.default=class{constructor(){this.whitespaces=null,this.comment=null}setWhitespaces(...e){i.WsvLine.validateWhitespaces(e),this.whitespaces=e}getWhitespaces(){return[...this.whitespaces]}setComment(e){i.WsvLine.validateComment(e),this.comment=e}getComment(){return this.comment}setWhitespacesAndComment(e,t){this.whitespaces=e,this.comment=t}toWsvLines(e,t,n,i){}}},211:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(945),r=i(n(355)),o=i(n(597)),a=i(n(41)),l=i(n(264));class u{static parseDocument(e,t){const n=s.WsvDocument.parse(e),i=u.getEndKeyword(n),r=new s.WsvDocumentLineIterator(n,i);t.setEndKeyword(i);const o=u.readRootElement(r,t.emptyNodesBefore);return t.setRoot(o),u.readElementContent(r,o),u.readEmptyNodes(t.emptyNodesAfter,r),t}static readRootElement(e,t){if(u.readEmptyNodes(t,e),!e.hasLine())throw new l.default("Root element expected");const n=e.getLine();if(!n.hasValues()||1!==n.getValues().length||s.StringUtil.equalsIgnoreCase(n.getValues()[0],e.getEndKeyword()))throw new l.default("Invalid root element start");const i=n.getValues()[0],r=new o.default(i);return r.setWhitespacesAndComment(n.getWhitespaces(),n.getComment()),r}static readNode(e,t){let n;const i=e.getLine();if(i.hasValues()){const a=i.getValues()[0];if(s.StringUtil.equalsIgnoreCase(a,e.getEndKeyword())){if(i.getValues().length>1)throw new l.default("Attribute with end keyword name is not allowed");return t.setEndWhitespacesAndComment(i.getWhitespaces(),i.getComment()),null}if(1===i.getValues().length){const t=new o.default(a);t.setWhitespacesAndComment(i.getWhitespaces(),i.getComment()),this.readElementContent(e,t),n=t}else{const e=i.getValues().slice(1),t=new r.default(a,e);t.setWhitespacesAndComment(i.getWhitespaces(),i.getComment()),n=t}}else{const e=new a.default;e.setWhitespacesAndComment(i.getWhitespaces(),i.getComment()),n=e}return n}static readElementContent(e,t){for(;;){if(!e.hasLine())throw new l.default("Element not closed");const n=u.readNode(e,t);if(null==n)break;t.add(n)}}static readEmptyNodes(e,t){for(;t.isEmptyLine();){const n=u.readEmptyNode(t);e.push(n)}}static readEmptyNode(e){const t=e.getLine(),n=new a.default;return n.setWhitespacesAndComment(t.getWhitespaces(),t.getComment()),n}static getEndKeyword(e){for(let t=e.getLines().length-1;t>=0;t--){const n=e.getLine(t).getValues();if(null!==n){if(1===n.length)return n[0];if(n.length>1)break}}throw new l.default("End keyword could not be detected")}}t.default=u},264:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,...t){super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.name="SmlParserException",this.message=`${e}`}}t.default=n},794:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),console.log("Experimental > SmlRequest: This feature is a work in progress. Don't depend on it yet. It may go through significant changes."),t.default=class{static get(e){return n(this,void 0,void 0,(function*(){return null}))}static post(e,t){return n(this,void 0,void 0,(function*(){return null}))}static delete(e){return n(this,void 0,void 0,(function*(){return null}))}static put(e,t){return n(this,void 0,void 0,(function*(){return null}))}static patch(e,t){return n(this,void 0,void 0,(function*(){return null}))}}},650:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(945);class s{static serializeDocument(e){const t=new i.WsvDocument;return s.serialzeEmptyNodes(e.emptyNodesBefore,t),e.getRoot().toWsvLines(t,0,e.getDefaultIndentation(),e.getEndKeyword()),s.serialzeEmptyNodes(e.emptyNodesAfter,t),t.toString()}static serializeElement(e){const t=new i.WsvDocument;return e.toWsvLines(t,0,null,"End"),t.toString()}static serializeAttribute(e){const t=new i.WsvDocument;return e.toWsvLines(t,0,null,null),t.toString()}static serializeAttributeInternal(e,t,n,i){const r=s.getWhitespaces(e.getWhitespaces(),n,i),o=[e.name,...e.getValues()];t.addWsvLineBySet(o,r,e.getComment())}static serializeEmptyNode(e){const t=new i.WsvDocument;return e.toWsvLines(t,0,null,null),t.toString()}static serializeEmptyNodeInternal(e,t,n,i){const r=s.getWhitespaces(e.getWhitespaces(),n,i);t.addWsvLineBySet(null,r,e.getComment())}static serializeElementInternal(e,t,n,i,r){const o=n+1,a=s.getWhitespaces(e.getWhitespaces(),n,i);t.addWsvLineBySet([e.name],a,e.getComment());for(const n of e.nodes)n.toWsvLines(t,o,i,r);const l=s.getWhitespaces(e.getEndWhitespaces(),n,i);t.addWsvLineBySet([r],l,e.getEndComment())}static getWhitespaces(e,t,n){return null!=e&&e.length>0?e:null==n?["\t".repeat(t)]:[n.repeat(t)]}static serialzeEmptyNodes(e,t){for(const n of e)n.toWsvLines(t,0,null,null)}}t.default=s},945:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtilWsv=t.WsvParserException=t.WsvParserCharIterator=t.WsvLine=t.WsvDocumentServer=t.WsvDocumentLineIterator=t.WsvDocument=t.WsvChar=t.StringUtil=t.ReliableTxtFile=t.ReliableTxtException=t.ReliableTxtEncoding=t.ReliableTxtDocumentServer=t.ReliableTxtDocument=void 0;const s=n(894);Object.defineProperty(t,"ReliableTxtDocument",{enumerable:!0,get:function(){return s.ReliableTxtDocument}}),Object.defineProperty(t,"ReliableTxtDocumentServer",{enumerable:!0,get:function(){return s.ReliableTxtDocumentServer}}),Object.defineProperty(t,"ReliableTxtEncoding",{enumerable:!0,get:function(){return s.ReliableTxtEncoding}}),Object.defineProperty(t,"ReliableTxtException",{enumerable:!0,get:function(){return s.ReliableTxtException}}),Object.defineProperty(t,"ReliableTxtFile",{enumerable:!0,get:function(){return s.ReliableTxtFile}}),Object.defineProperty(t,"StringUtil",{enumerable:!0,get:function(){return s.StringUtil}});const r=i(n(236));t.StringUtilWsv=r.default;const o=i(n(36));t.WsvChar=o.default;const a=i(n(806));t.WsvDocument=a.default;const l=i(n(90));t.WsvDocumentLineIterator=l.default;const u=i(n(223));t.WsvDocumentServer=u.default;const c=i(n(534));t.WsvLine=c.default;const d=i(n(135));t.WsvParserCharIterator=d.default;const h=i(n(495));t.WsvParserException=h.default},246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(894);t.default=class{constructor(){this.codePoints=[]}clear(){this.codePoints=[]}toString(){return i.StringUtil.codePointsToString(this.codePoints)}appendCodePoint(e){this.codePoints.push(e)}appendString(e){const t=i.StringUtil.stringToCodePoints(e);this.codePoints=[...this.codePoints,...t]}getLength(){return this.codePoints.length}}},236:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(894),r=i(n(36));class o extends s.StringUtil{static isWhitespaceOrEmpty(e){const t=s.StringUtil.stringToCodePoints(e);for(const e of t)if(!r.default.isWhitespace(e))return!1;return!0}}t.default=o},36:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static isWhitespace(e){return e>=9&&e<=13||32===e||133===e||160===e||5760===e||e>=8192&&e<=8202||e>=8232&&e<=8233||8239===e||8287===e||12288===e}}},806:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(534)),r=i(n(280)),o=i(n(907));class a{constructor(){this.lines=[]}static parse(e){const t=new a;return r.default.parseDocument(e,t)}addWsvLines(...e){for(const t of e)this.lines.push(t);return this}addWsvLineByValues(...e){const t=new s.default;for(const n of e)t.addValue(n);return this.addWsvLines(t)}addWsvLineBySet(e,t,n){return this.addWsvLines((new s.default).set(e,t,n)),this}getLines(){return this.lines}getLine(e){return this.lines[e]}toArray(){const e=[];for(let t=0;t<this.lines.length;t++)e[t]=this.lines[t].getValues();return e}toString(){return o.default.serializeDocument(this)}}t.default=a},90:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(460));class r extends s.default{constructor(e,t){if(super(),this.index=0,null===t)throw Error("Endkeyword cannot be null");this.wsvDocument=e,this.endKeyword=t}getEndKeyword(){return this.endKeyword}hasLine(){return this.index<this.wsvDocument.getLines().length}isEmptyLine(){return this.hasLine()&&!this.wsvDocument.getLine(this.index).hasValues()}getLine(){const e=this.wsvDocument.getLine(this.index);return this.index++,e}toString(){let e="("+this.index+"): ";return this.hasLine()&&(e+=this.wsvDocument.getLine(this.index).toString()),e}}t.default=r},223:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(894),r=i(n(806)),o=i(n(280));class a extends r.default{constructor(){return super(),this.encoding=s.ReliableTxtEncoding.UTF8,this}static parse(e){const t=new a;return o.default.parseDocument(e,t)}static load(e){const t=s.ReliableTxtDocumentServer.load(e),n=a.parse(t.getText());return n.setEncoding(t.getEncoding()),n}setEncoding(e){return this.encoding=e,this}getEncoding(){return this.encoding}save(e){return new s.ReliableTxtDocumentServer(this.toString()).setEncoding(this.getEncoding()).save(e),this}}t.default=a},534:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(894),r=i(n(246)),o=i(n(280)),a=i(n(907));class l{constructor(...e){this.values=[],this.comment=null;for(const t of e)this.addValue(t);return this.whitespaces=null,this.comment=null,this}static parse(e){return o.default.parseLine(e)}static validateWhitespaces(e){if(null!==e)for(const t of e)if(null!==t&&!s.StringUtil.isWhitespaceOrEmpty(t))throw new Error("Whitespace value contains non whitespace character")}static validateComment(e){if(null!==e&&e.indexOf("\n"))throw new Error("Line break in comment is not allowed")}addValue(e){null===this.values&&(this.values=[]),this.values.push(e)}getValues(){return this.values}setValues(...e){this.values=e}hasValues(){return null!==this.values&&this.values.length>0}setWhitespaces(e){l.validateWhitespaces(e),this.whitespaces=e}getWhitespaces(){return null===this.whitespaces?null:[...this.whitespaces]}setComment(e){l.validateComment(e),this.comment=e}getComment(){return this.comment}set(e,t,n){return this.values=e,this.whitespaces=t,this.comment=n,this}toString(){const e=new r.default;return a.default.serializeLine(e,this),e.toString()}}t.default=l},460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){}hasLine(){return!1}isEmptyLine(){return!1}getLine(){return null}getEndKeyword(){return null}}},280:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(894),r=i(n(534)),o=i(n(135)),a=i(n(495));class l{static parseLine(e){const t=new o.default(e),n=l.parseLineWithIterator(t);if(t.tryReadChar(s.StringUtil.lineBreak))throw new a.default(t,"Multiple WSV lines not allowed");if(!t.isEndOfText())throw new a.default(t,"WSV line not parsed completely");return n}static parseDocument(e,t){const n=new o.default(e);for(;;){const e=l.parseLineWithIterator(n);if(t.addWsvLines(e),n.isEndOfText())break;if(!n.tryReadChar(s.StringUtil.lineBreak))throw new a.default(n,"Invalid WSV document")}if(!n.isEndOfText())throw new a.default(n,"WSV document not parsed completely");return t}static parseLineWithIterator(e){const t=[],n=[];let i=e.readWhitespaceOrNull();for(n.push(i);!e.isChar(s.StringUtil.lineBreak)&&!e.isEndOfText();){let r="";if(e.isChar(s.StringUtil.hash))break;if(e.tryReadChar(s.StringUtil.doubleQuote)?r=e.readString():(r=e.readValue(),"-"===r&&(r=null)),t.push(r),i=e.readWhitespaceOrNull(),null==i)break;n.push(i)}let o=null;return e.tryReadChar(s.StringUtil.hash)&&(o=e.readCommentText(),null==i&&n.push(null)),(new r.default).set(t,n,o)}}t.default=l},135:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(894),r=i(n(246)),o=i(n(36)),a=i(n(495));t.default=class{constructor(e){this.sb=new r.default,this.chars=[],this.index=0,this.chars=s.StringUtil.stringToCodePoints(e)}getText(){return s.StringUtil.codePointsToString(this.chars)}getLineInfoString(){const e=this.getLineInfo();return`(${e[1]+1}, ${e[2]+1})`}getLineInfo(){let e=0,t=0;for(let n=0;n<this.index;n++)this.chars[n]===s.StringUtil.lineBreak?(e++,t=0):t++;return[this.index,e,t]}isEndOfText(){return this.index>=this.chars.length}isChar(e){return!this.isEndOfText()&&this.chars[this.index]===e}tryReadChar(e){return!!this.isChar(e)&&(this.index++,!0)}readCommentText(){const e=this.index;for(;!this.isEndOfText()&&this.chars[this.index]!==s.StringUtil.lineBreak;)this.index++;return s.StringUtil.getSubstr(this.chars,e,this.index-e)}readWhitespaceOrNull(){const e=this.index;for(;!this.isEndOfText();){const e=this.chars[this.index];if(e===s.StringUtil.lineBreak)break;if(!o.default.isWhitespace(e))break;this.index++}return this.index===e?null:s.StringUtil.getSubstr(this.chars,e,this.index-e)}readString(){for(this.sb.clear();;){if(this.isEndOfText())throw new a.default(this,"String not closed");const e=this.chars[this.index];if(e===s.StringUtil.lineBreak)throw new a.default(this,"String not closed in starting line");if(e===s.StringUtil.doubleQuote)if(this.index++,this.tryReadChar(s.StringUtil.doubleQuote))this.sb.appendCodePoint(s.StringUtil.doubleQuote);else{if(!this.tryReadChar(s.StringUtil.slash))break;if(!this.tryReadChar(s.StringUtil.doubleQuote))throw new a.default(this,"String expected after linebreak slash");this.sb.appendCodePoint(s.StringUtil.lineBreak)}else this.sb.appendCodePoint(e),this.index++}return this.sb.toString()}readValue(){const e=this.index;for(;!this.isEndOfText();){const e=this.chars[this.index];if(o.default.isWhitespace(e)||e===s.StringUtil.hash)break;if(e===s.StringUtil.doubleQuote)throw new a.default(this,"String starting in value");this.index++}if(this.index===e)throw new a.default(this,"Invalid value");return s.StringUtil.getSubstr(this.chars,e,this.index-e)}}},495:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,t){super(`${t} ${e.getLineInfoString()}`),Error.captureStackTrace&&Error.captureStackTrace(this,n);const i=e.getLineInfo();this.index=i[0],this.lineIndex=i[1],this.linePosition=i[2],this.text=e.getText()}}t.default=n},907:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(894),r=i(n(246)),o=i(n(36));class a{static containsSpecialChars(e){const t=s.StringUtil.stringToCodePoints(e);for(const e of t)if(e===s.StringUtil.lineBreak||o.default.isWhitespace(e)||e===s.StringUtil.doubleQuote||e===s.StringUtil.hash)return!0;return!1}static serializeLine(e,t){null!==t.getWhitespaces()&&t.getWhitespaces().length>0?a.serializeValuesWithWhitespace(e,t):a.serializeValuesWithoutWhitespace(e,t),null!==t.getComment()&&(e.appendCodePoint(s.StringUtil.hash),e.appendString(t.getComment()))}static serializeDocument(e){const t=new r.default;let n=!0;for(const i of e.getLines())n?n=!1:t.appendCodePoint(s.StringUtil.lineBreak),a.serializeLine(t,i);return t.toString()}static serializeValue(e,t){if(null===t)e.appendString("-");else if(""===t)e.appendString('""');else if("-"===t)e.appendString('"-"');else if(a.containsSpecialChars(t)){e.appendCodePoint(s.StringUtil.hash);const n=s.StringUtil.stringToCodePoints(t);for(const t of n)t===s.StringUtil.lineBreak?e.appendString('"/"'):t===s.StringUtil.hash?e.appendString('""'):e.appendCodePoint(t);e.appendCodePoint(s.StringUtil.hash)}else e.appendString(t)}static serializeWhitespace(e,t,n){null!=t&&t.length>0?e.appendString(t):n&&e.appendString(" ")}static serializeValuesWithWhitespace(e,t){const n=t.getValues(),i=t.getWhitespaces(),s=t.getComment();if(null!==n){for(let t=0;t<n.length;t++){let s=null;t<i.length&&(s=i[t]),0===t?a.serializeWhitespace(e,s,!1):a.serializeWhitespace(e,s,!0),a.serializeValue(e,n[t])}if(i.length>=n.length+1){const t=i[n.length];a.serializeWhitespace(e,t,!1)}else null!=s&&n.length>0&&e.appendString(" ")}else{const t=i[0];a.serializeWhitespace(e,t,!1)}}static serializeValuesWithoutWhitespace(e,t){const n=t.getValues(),i=t.getComment();if(null===n)return;let s=!1;for(const t of n)s?e.appendString(" "):s=!0,a.serializeValue(e,t);null!=i&&n.length>0&&e.appendString(" ")}}t.default=a},436:()=>{}},t={},function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}(590);var e,t}));